@page
@model PosLite.Pages.Categories.FormModalModel
@{
    Layout = null; // chỉ render phần modal
}
<div class="modal-header">
    <h5 class="modal-title">@(@Model.IsEdit ? "Sửa danh mục" : "Thêm danh mục")</h5>
    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
</div>

<div class="modal-body">
    <form hx-post="/Categories/FormModal@(Model.Id.HasValue ? $"?id={Model.Id}" : "")"
          hx-target="#catModalContent" hx-swap="innerHTML" asp-antiforgery="true">
        <div asp-validation-summary="ModelOnly" class="text-danger small mb-2"></div>

        <div class="mb-3">
            <label class="form-label">Tên danh mục</label>
            <input name="Name" value="@Model.Name" class="form-control" />
            <span asp-validation-for="Name" class="text-danger small"></span>
        </div>

        @if (Model.IsEdit)
        {
            <div class="form-check mb-3">
                <input class="form-check-input" type="checkbox" name="IsActive" value="true" @(Model.IsActive ? "checked" : "") />
                <input type="hidden" name="IsActive" value="false" />
                <label class="form-check-label">Đang dùng</label>
            </div>
        }

        <div class="d-flex justify-content-end gap-2">
            <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Hủy</button>
            <button class="btn btn-primary" type="submit">Lưu</button>
        </div>
    </form>
</div>

@if (!ViewData.ModelState.IsValid)
{
    <script> if (window.appToast) appToast.err('Vui lòng kiểm tra lại các trường.'); </script>
}
